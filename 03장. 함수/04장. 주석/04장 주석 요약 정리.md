# 4장. 주석

## 주석은 나쁜 코드를 보완하지 못한다

> 나쁜 코드에 주석을 달지마라. 새로 짜라.

- 코드에 주석을 추가하는 이유는 **나쁜 코드 품질** 때문
    
    - **필요한 것은 주석이 아닌 코드 정리**
    
- 주석은 거짓말을 한다
    - 주석은 오래될 수록 코드에서 멀어진다
    - 더 이상 지킬 필요가 없거나 지키면 안되는 규칙을 명시한다


## 코드로 의도를 표현하라

대부분의 코드는 함수화 함으로써, 충분히 의도를 표현할 수 있다

```jsx
// 직원이 복지 혜택을 받을 자격이 있는지 검사한다.
if ((employee.flags & HOURLY_FLAG) && (employee.age > 65))
```

```jsx
if (employee.isEligibleForFullBenefits())
```

---

## ✅ 좋은 주석

| 유형               | 설명                                                                         |
| ---------------- | -------------------------------------------------------------------------- |
| 법적인 주석           | - 회사가 정립한 구현 표준에 맞춰 법적인 이유로 명시하는 주석<br>- 각 소스 파일 첫머리에 들어가는 저작권 정보/소유권 정보 등 |
| 기본 정보를 제공하는 주석   | - 추상 메서드나 정규표현식의 의미를 설명<br>**- 적절한 함수명을 부여함으로써, 주석 제거 가능**                 |
| 의도를 설명하는 주석      | - 구현 의도를 설명하는 경우<br>- 저자의 문제 해결방식에 동의할 수 없더라도, 의도는 분명히 드러난다                |
| 의미를 명료하게 밝히는 주석  | - 모호한 인수나 반환값을 설명<br>- 표준 라이브러리 등 변경 불가능한 코드의 의미를 보완                       |
| 결과를 경고하는 주석      | - 다른 프로그래머에게 경고할 목적<br>- 실행 조건이나 동시성 문제 등 주의사항 전달                          |
| TODO 주석          | - 앞으로 해야 할 작업 명시<br>- 구현하지 않은 이유와 방향 설명<br>**- 주기적으로 제거해야 함**              |
| 중요성을 강조하는 주석     | - 간과하기 쉬운 중요 코드를 강조                                                        |
| 공개 API의 Javadocs | - 설명이 잘 된 공개 API 문서는 유용<br>- 단, **잘못된 정보 전달 가능성**도 있으므로 주의 필요              |


## ❌ 나쁜 주석

| 유형                 | 설명                                                                               |
| ------------------ | -------------------------------------------------------------------------------- |
| 주절거리는 주석           | - 명확하지 않고 두서 없는 주석<br>**- 오히려 주석을 해석해야 하는 상황 유발**                                |
| 같은 이야기를 중복하는 주석    | - 코드보다 많은 정보를 제공하지 않음<br>- 의도를 설명하지도 않음<br>**- 독자가 함수를 대충 이해하고 넘어가게 만든다**        |
| 오해할 여지가 있는 주석      | - 좋은 의도였더라도 실제 코드와 달라 문제 유발 가능                                                   |
| 의무적으로 다는 주석        | - 모든 함수에 Javadoc을 강제로 작성<br>- 주석이 잘못된 정보를 제공하게 될 가능성 증가                          |
| 이력을 기록하는 주석        | - **버전 관리 시스템**으로 대체 가능                                                          |
| 있으나 마나 한 주석        | - 당연하거나 새로운 정보가 없는 주석<br>- 개발자가 주석을 무시하는 습관에 빠지게 된다<br>- 시간이 지나면 코드와 불일치해 거짓말이 됨 |
| 무서운 잡음             | - 잘못된 주석은 불신과 불안감을 유발                                                            |
| 함수/변수로 표현 가능한 주석   | - 의미 있는 이름으로 대체 가능하다면 주석은 불필요                                                    |
| 위치를 표시하는 주석        | - 구분선 등 시각적 주석<br>- 주의를 환기할 수 있지만, 과도한 사용은 역효과                                   |
| 닫는 괄호 주석           | - `// while` 등 닫는 위치 표시<br>- 작고 명확한 함수에서는 불필요                                    |
| 공로/저자 표시 주석        | - **버전 관리 시스템**으로 대체 가능                                                          |
| 주석 처리된 코드          | - 삭제를 주저하게 만들며 유지 보수 방해<br>- **버전 관리 시스템**이 모든 코드를 기억하므로 불필요                     |
| HTML 주석            | - 편집기에서 가독성이 떨어짐<br>- HTML로의 추출은 도구(Javadoc) 사용 권장                               |
| 전역 정보              | - 코드 근처가 아닌 시스템 전반에 대한 설명<br>- 유지 관리 어려움                                         |
| 너무 많은 정보           | - 흥미로운 역사나, 관련없는 정보를 늘어놓지 마라                                                     |
| 모호한 관계             | - 주석과 코드의 연결이 불분명할 경우<br>- 주석 자체가 또 다른 설명을 요구함                                   |
| 함수 헤더              | - 짧은 함수에는 긴 설명이 불필요                                                              |
| 비공개 코드에서의 Javadocs | - 과도한 문서화는 오히려 코드를 보기 싫게 함                                                       |

---

## 요약

- 주석은 최대한 줄이고, 코드 자체로 의도를 드러내야 한다.
- 주석이 반드시 필요하다면 **정확하고 간결하게**, 그리고 **근처 코드에 한정해서**.
- 잘못된 주석은 없는 것보다 더 해롭다.
- 수정 이력, 작성자, 삭제할 코드 등은 **버전 관리 시스템**을 활용하자.
